---
apache_vhosts_version: '2.2'
apache_default_vhost_filename: 000-default
apache_ports_configuration_items:
  - regexp: '^Listen '
    line: 'Listen {{ apache_listen_port }}'
  - regexp: '^#?NameVirtualHost '
    line: 'NameVirtualHost {{ apache_listen_ip }}:{{ apache_listen_port }}'
apache_security_configuration_items:
  - regexp: '^TraceEnable '
    line: 'TraceEnable Off'
  - regexp: '^ServerSignature '
    line: 'ServerSignature Off'
  - regexp: '^ServerTokens '
    line: 'ServerTokens Prod'
apache_keepalive_configuration_items:
  - regexp: '^KeepAlive '
    line: 'KeepAlive {% if apache_keepalive %}On{% else %}Off{% endif %}'
  - regexp: '^MaxKeepAliveRequests '
    line: 'MaxKeepAliveRequests {{ apache_keepalive_requests }}'
  - regexp: '^KeepAliveTimeout '
    line: 'KeepAliveTimeout {{ apache_keepalive_timeout }}'
apache_mpm_prefork_configuration_items:
  - regexp: '^\s*StartServers.*'
    line: 'StartServers {{ apache_prefork_start_servers }}'
  - regexp: '^\s*MinSpareServers.*'
    line: 'MinSpareServers {{ apache_prefork_min_spare_servers }}'
  - regexp: '^\s*MaxSpareServers.*'
    line: 'MaxSpareServers {{ apache_prefork_max_spare_servers }}'
  - regexp: '^\s*MaxClients.*'
    line: 'MaxClients {{ apache_prefork_max_clients }}'
  - regexp: '^\s*MaxRequestsPerChild.*'
    line: 'MaxRequestsPerChild {{ apache_prefork_max_requests_per_child }}'
  - regexp: '^\s*ServerLimit '
    line: 'ServerLimit {{ apache_prefork_server_limit }}'
    insertbefore: '^\s*MaxClients\s'
apache_mpm_worker_configuration_items:
  - regexp: '^\s*StartServers.*'
    line: 'StartServers {{ apache_worker_start_servers }}'
  - regexp: '^\s*MinSpareThreads.*'
    line: 'MinSpareThreads {{ apache_worker_min_spare_threads }}'
  - regexp: '^\s*MaxSpareThreads.*'
    line: 'MaxSpareThreads {{ apache_worker_max_spare_threads }}'
  - regexp: '^\s*MaxClients.*'
    line: 'MaxClients {{ apache_worker_max_clients }}'
  - regexp: '^\s*MaxRequestsPerChild.*'
    line: 'MaxRequestsPerChild {{ apache_worker_max_requests_per_child }}'
  - regexp: '^\s*ThreadsPerChild.*'
    line: 'ThreadsPerChild {{ apache_worker_threads_per_child }}'
  - regexp: '^\s*ServerLimit\s'
    line: 'ServerLimit {{ apache_worker_server_limit }}'
    insertbefore: '^\s*MaxClients\s'
  - regexp: '^\s*ThreadLimit\s'
    line: 'ThreadLimit {{ apache_worker_thread_limit }}'
    insertbefore: '^\s*ThreadsPerChild\s'
apache_mpm_event_configuration_items:
  - regexp: '^\s*StartServers.*'
    line: 'StartServers {{ apache_event_start_servers }}'
  - regexp: '^\s*MinSpareThreads.*'
    line: 'MinSpareThreads {{ apache_event_min_spare_threads }}'
  - regexp: '^\s*MaxSpareThreads.*'
    line: 'MaxSpareThreads {{ apache_event_max_spare_threads }}'
  - regexp: '^\s*MaxClients.*'
    line: 'MaxClients {{ apache_event_max_clients }}'
  - regexp: '^\s*MaxRequestsPerChild.*'
    line: 'MaxRequestsPerChild {{ apache_event_max_requests_per_child }}'
  - regexp: '^\s*ThreadsPerChild.*'
    line: 'ThreadsPerChild {{ apache_event_threads_per_child }}'
  - regexp: '^\s*ServerLimit\s'
    line: 'ServerLimit {{ apache_event_server_limit }}'
    insertbefore: '^\s*MaxClients\s'
  - regexp: '^\s*ThreadLimit\s'
    line: 'ThreadLimit {{ apache_event_thread_limit }}'
    insertbefore: '^\s*ThreadsPerChild\s'
